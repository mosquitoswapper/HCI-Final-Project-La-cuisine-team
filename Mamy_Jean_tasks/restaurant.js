// ======================================================
// =============== 60 RESTAURANTS FICTIFS ===============
// ======================================================

// ---------------- HALAL ----------------
const halalRestaurants = [{
        name: "Warung Nusantara Halal",
        cuisine: "Halal",
        rating: 4.6,
        reviews: 820,
        address: "Jl. Melati No.12, Tebet, Jakarta Selatan",
        city: "Jakarta",
        image: "../images/resto1.jpg"
    },
    {
        name: "Sate Madina",
        cuisine: "Halal",
        rating: 4.7,
        reviews: 1340,
        address: "Jl. KH. Hasyim Ashari No.21, Jakarta Pusat",
        city: "Jakarta",
        image: "../images/resto2.jpg"
    },
    {
        name: "Ayam Bakar Barokah",
        cuisine: "Halal",
        rating: 4.5,
        reviews: 960,
        address: "Jl. Raya Pasar Minggu No.88, Jakarta Selatan",
        city: "Jakarta",
        image: "../images/resto3.jpg"
    },
    {
        name: "Resto Keluarga Al-Iman",
        cuisine: "Halal",
        rating: 4.4,
        reviews: 540,
        address: "Jl. Cempaka Putih No.7, Jakarta Pusat",
        city: "Jakarta",
        image: "../images/resto4.jpg"
    },
    {
        name: "Nasi Uduk Haramain",
        cuisine: "Halal",
        rating: 4.3,
        reviews: 430,
        address: "Jl. Mangga Dua Raya No.34, Jakarta Utara",
        city: "Jakarta",
        image: "../images/resto5.jpg"
    },
    {
        name: "Dapur Selera Muslim",
        cuisine: "Halal",
        rating: 4.8,
        reviews: 1520,
        address: "Jl. Ahmad Yani No.56, Jakarta Timur",
        city: "Jakarta",
        image: "../images/resto6.jpg"
    },
    {
        name: "Lesehan Halal Corner",
        cuisine: "Halal",
        rating: 4.2,
        reviews: 370,
        address: "Jl. Cipete Raya No.15, Jakarta Selatan",
        city: "Jakarta",
        image: "../images/resto7.jpg"
    },
    {
        name: "Rujak Kalimalang",
        cuisine: "Halal",
        rating: 4.1,
        reviews: 290,
        address: "Jl. Raya Kalimalang No.101, Jakarta Timur",
        city: "Jakarta",
        image: "../images/resto8.jpg"
    },
    {
        name: "Halal Street Bites",
        cuisine: "Halal",
        rating: 4.6,
        reviews: 680,
        address: "Jl. Tomang Raya No.33, Jakarta Barat",
        city: "Jakarta",
        image: "../images/resto9.jpg"
    },
    {
        name: "Kedai Soto Syariah",
        cuisine: "Halal",
        rating: 4.5,
        reviews: 410,
        address: "Jl. Fatmawati No.60, Jakarta Selatan",
        city: "Jakarta",
        image: "../images/resto10.jpg"
    },
    {
        name: "Gudeg Jogja Halal",
        cuisine: "Halal",
        rating: 4.4,
        reviews: 520,
        address: "Jl. Matraman Raya No.47, Jakarta Timur",
        city: "Jakarta",
        image: "../images/resto11.jpg"
    },
    {
        name: "Sop Buntut Rahmah",
        cuisine: "Halal",
        rating: 4.7,
        reviews: 890,
        address: "Jl. Gatot Subroto No.19, Jakarta Selatan",
        city: "Jakarta",
        image: "../images/resto12.jpg"
    },
];


// ---------------- VEGAN ----------------
const veganRestaurants = [{
        name: "Green Leaf Vegan Bistro",
        cuisine: "Vegan",
        rating: 4.8,
        reviews: 720,
        address: "Jl. Panglima Polim V No.22, Jakarta Selatan",
        city: "Jakarta",
        image: "../images/resto13.jpg"
    },
    {
        name: "Plant Power Kitchen",
        cuisine: "Vegan",
        rating: 4.7,
        reviews: 650,
        address: "Jl. Tebet Dalam No.15, Jakarta Selatan",
        city: "Jakarta",
        image: "../images/resto14.jpg"
    },
    {
        name: "Herbivore Haven",
        cuisine: "Vegan",
        rating: 4.5,
        reviews: 530,
        address: "Jl. Gunawarman No.50, Jakarta Selatan",
        city: "Jakarta",
        image: "../images/resto15.jpg"
    },
    {
        name: "Rainbow Bowl Bar",
        cuisine: "Vegan",
        rating: 4.6,
        reviews: 410,
        address: "Jl. Danau Sunter Utara No.33, Jakarta Utara",
        city: "Jakarta",
        image: "../images/resto16.jpg"
    },
    {
        name: "Pure Earth Cafe",
        cuisine: "Vegan",
        rating: 4.9,
        reviews: 980,
        address: "Jl. Antasari No.21, Jakarta Selatan",
        city: "Jakarta",
        image: "../images/resto17.jpg"
    },
    {
        name: "Jakarta Vegan House",
        cuisine: "Vegan",
        rating: 4.4,
        reviews: 360,
        address: "Jl. Wijaya II No.17, Jakarta Selatan",
        city: "Jakarta",
        image: "../images/resto18.jpg"
    },
    {
        name: "Happy Herb Cafe",
        cuisine: "Vegan",
        rating: 4.3,
        reviews: 295,
        address: "Jl. Cikini Raya No.6, Jakarta Pusat",
        city: "Jakarta",
        image: "../images/resto19.jpg"
    },
    {
        name: "Vegan & Co.",
        cuisine: "Vegan",
        rating: 4.5,
        reviews: 540,
        address: "Jl. Kelapa Nias No.3, Jakarta Utara",
        city: "Jakarta",
        image: "../images/resto20.jpg"
    },
    {
        name: "Soul Plant Eatery",
        cuisine: "Vegan",
        rating: 4.7,
        reviews: 610,
        address: "Jl. Radio Dalam No.40, Jakarta Selatan",
        city: "Jakarta",
        image: "../images/resto21.jpg"
    },
    {
        name: "Roots & Sprouts",
        cuisine: "Vegan",
        rating: 4.6,
        reviews: 505,
        address: "Jl. Senopati No.45, Jakarta Selatan",
        city: "Jakarta",
        image: "../images/resto22.jpg"
    },
    {
        name: "Vegan Urban Kitchen",
        cuisine: "Vegan",
        rating: 4.4,
        reviews: 430,
        address: "Jl. Kota Kasablanka No.2, Jakarta Selatan",
        city: "Jakarta",
        image: "../images/resto23.jpg"
    },
    {
        name: "Green Harmony Diner",
        cuisine: "Vegan",
        rating: 4.2,
        reviews: 310,
        address: "Jl. Gajah Mada No.15, Jakarta Barat",
        city: "Jakarta",
        image: "../images/resto24.jpg"
    },
];


// ---------------- NON-HALAL ----------------
const nonHalalRestaurants = [{
        name: "Pork & Flame Grill",
        cuisine: "Non-halal",
        rating: 4.5,
        reviews: 1120,
        address: "Jl. Pluit Karang Indah No.9, Jakarta Utara",
        city: "Jakarta",
        image: "../images/resto25.jpg"
    },
    {
        name: "Bacon Bros Diner",
        cuisine: "Non-halal",
        rating: 4.3,
        reviews: 860,
        address: "Jl. Kelapa Gading Boulevard No.25, Jakarta Utara",
        city: "Jakarta",
        image: "../images/resto26.jpg"
    },
    {
        name: "Tokyo Tonkatsu Bar",
        cuisine: "Non-halal",
        rating: 4.6,
        reviews: 960,
        address: "Jl. Senayan City Mall L3, Jakarta Selatan",
        city: "Jakarta",
        image: "../images/resto27.jpg"
    },
    {
        name: "The Wine Cellar Bistro",
        cuisine: "Non-halal",
        rating: 4.4,
        reviews: 730,
        address: "Jl. MH Thamrin No.9, Jakarta Pusat",
        city: "Jakarta",
        image: "../images/resto28.jpg"
    },
    {
        name: "Ribs & Co Smokehouse",
        cuisine: "Non-halal",
        rating: 4.5,
        reviews: 1340,
        address: "Jl. Ampera Raya No.14, Jakarta Selatan",
        city: "Jakarta",
        image: "../images/resto29.jpg"
    },
    {
        name: "Sausage Garden",
        cuisine: "Non-halal",
        rating: 4.2,
        reviews: 590,
        address: "Jl. Boulevard Barat Raya No.5, Jakarta Utara",
        city: "Jakarta",
        image: "../images/resto30.jpg"
    },
    {
        name: "Beer & Bites Gastropub",
        cuisine: "Non-halal",
        rating: 4.1,
        reviews: 780,
        address: "Jl. Gatot Subroto No.36, Jakarta Selatan",
        city: "Jakarta",
        image: "../images/resto31.jpg"
    },
    {
        name: "La Porchetta Trattoria",
        cuisine: "Non-halal",
        rating: 4.3,
        reviews: 640,
        address: "Jl. PIK No.88, Jakarta Utara",
        city: "Jakarta",
        image: "../images/resto32.jpg"
    },
    {
        name: "Tapas y Jamón",
        cuisine: "Non-halal",
        rating: 4.2,
        reviews: 520,
        address: "Jl. Cipete Raya No.27, Jakarta Selatan",
        city: "Jakarta",
        image: "../images/resto33.jpg"
    },
    {
        name: "Steakhouse 88",
        cuisine: "Non-halal",
        rating: 4.4,
        reviews: 910,
        address: "Jl. Kuningan City No.5, Jakarta Selatan",
        city: "Jakarta",
        image: "../images/resto34.jpg"
    },
    {
        name: "BBQ Smoke & Brew",
        cuisine: "Non-halal",
        rating: 4.3,
        reviews: 640,
        address: "Jl. Kemang Raya No.30, Jakarta Selatan",
        city: "Jakarta",
        image: "../images/resto35.jpg"
    },
    {
        name: "Pork Rib Shack",
        cuisine: "Non-halal",
        rating: 4.2,
        reviews: 570,
        address: "Jl. Hayam Wuruk No.11, Jakarta Barat",
        city: "Jakarta",
        image: "../images/resto36.jpg"
    },
];


// ======================================================
// =============== COMBINE ALL RESTAURANTS ===============
// ======================================================
const restaurants = [
    ...halalRestaurants,
    ...veganRestaurants,
    ...nonHalalRestaurants
];


// ======================================================
// =============== PAGINATION VARIABLES =================
// ======================================================
const listEl = document.getElementById("restaurantList");
const viewMoreBtn = document.getElementById("viewMoreBtn");
let displayed = 0;
let currentFiltered = [];


// ======================================================
// =============== CREATE CARD ELEMENT ==================
// ======================================================
function createRestaurantCard(resto) {
    const card = document.createElement("div");
    card.className = "restaurant-element";

    card.innerHTML = `
    <div class="image">
    <img src="${resto.image}" alt="${resto.name}">
    </div>

    <div class="content">
    <h2>${resto.name}</h2>

    <p class="rating">
        <span>${resto.cuisine}</span>
        <span class="stars">${renderStars(resto.rating)}</span>
        <span class="score">${resto.rating.toFixed(1)} (${resto.reviews} reviews)</span>
    </p>

    <p class="adress">${resto.address}</p>

    <div class="btn">
        <button onclick="window.location.href='../Dea_tasks/dea_foodlist.html'">
                View Menu
        </button>
        <button onclick="window.location.href='../Dea_tasks/reservation_dea.html'">
                Reserve Table
        </button>
    
    </div>
    </div>
`;

    return card;
}


// ======================================================
// =============== RENDER STAR SYSTEM ===================
// ======================================================
function renderStars(rating) {
    const full = Math.floor(rating);
    const half = rating - full >= 0.5;
    let html = "";

    for (let i = 0; i < full; i++) html += '<i class="fa-solid fa-star"></i>';
    if (half) html += '<i class="fa-solid fa-star-half-stroke"></i>';
    const empty = 5 - full - (half ? 1 : 0);
    for (let i = 0; i < empty; i++) html += '<i class="fa-regular fa-star"></i>';

    return html;
}


// ======================================================
// =============== INITIAL LIST RENDER ==================
// ======================================================
function renderList(items) {
    listEl.innerHTML = "";
    displayed = 0;
    currentFiltered = items;

    if (items.length === 0) {
        listEl.innerHTML = "<p style='color:white;text-align:center;'>No restaurant found.</p>";
        viewMoreBtn.style.display = "none";
        return;
    }

    renderNextBatch();
}


// ======================================================
// =============== SHOW NEXT 4 ITEMS ====================
// ======================================================
function renderNextBatch() {
    const batch = currentFiltered.slice(displayed, displayed + 4);

    batch.forEach(r => listEl.appendChild(createRestaurantCard(r)));

    displayed += batch.length;

    if (displayed >= currentFiltered.length) {
        viewMoreBtn.style.display = "none";
    } else {
        viewMoreBtn.style.display = "block";
    }
}

viewMoreBtn.addEventListener("click", renderNextBatch);


// ======================================================
// =============== SEARCH BAR LOGIC =====================
// ======================================================
const searchInput = document.getElementById("restaurantSearch");
const searchBtn = document.getElementById("restaurantSearchBtn");

function filterRestaurants() {
    const q = searchInput.value.trim().toLowerCase();

    // if empty → show HALAL
    if (!q) {
        renderList(halalRestaurants);
        return;
    }

    let filtered = [];

    if (q.includes("vegan")) {
        filtered = veganRestaurants;
    }
    else if (q.includes("non") || q.includes("non-halal") || q.includes("non halal")) {
        filtered = nonHalalRestaurants;
    }
    else if (q.includes("halal")) {
        filtered = halalRestaurants;
    }
    else {
        filtered = [];
    }

    renderList(filtered);
}


searchBtn.addEventListener("click", filterRestaurants);

searchInput.addEventListener("keydown", (e) => {
    if (e.key === "Enter") filterRestaurants();
});

// ======================================================
// =============== INITIAL EMPTY RENDER =================
// ======================================================
renderList(halalRestaurants);